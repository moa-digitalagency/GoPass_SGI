<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-GoPass Ticket</title>
    <script src="/static/js/tailwindcss.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* A4 Size */
        @page {
            size: A4;
            margin: 0;
        }
        body {
            width: 210mm;
            min-height: 297mm;
            margin: 0 auto;
            background: white;
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        .ticket-container {
            padding: 2cm;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-900">
    <div class="ticket-container relative min-h-screen">

        <!-- Header -->
        <div class="flex justify-between items-center mb-8 border-b-4 border-blue-900 pb-4">
            <img src="/static/img/logo_rva.png" alt="RVA" class="h-20 w-auto">
            <div class="text-center">
                 <h1 class="text-xl font-black text-blue-900 uppercase tracking-tight">RÉPUBLIQUE DÉMOCRATIQUE DU CONGO</h1>
                 <h2 class="text-sm font-bold text-gray-600 uppercase mt-1">Régie des Voies Aériennes (RVA)</h2>
            </div>
            <img src="/static/img/logo_gopass.png" alt="GoPass" class="h-20 w-auto">
        </div>

        <!-- Main Title -->
        <div class="text-center mb-10">
            <h1 class="text-2xl font-black text-blue-900 uppercase leading-snug">
                Redevance de Développement<br>des Infrastructures Aéroportuaires (IDEF)
            </h1>
            <p class="text-sm font-bold text-gray-500 mt-2 uppercase tracking-widest">E-GOPASS OFFICIEL</p>
        </div>

        <!-- Flight Info Block -->
        <div class="border-4 border-blue-900 rounded-3xl p-8 bg-blue-50/50 mb-10 shadow-sm relative overflow-hidden">
            <!-- Decorative corner -->
            <div class="absolute top-0 right-0 bg-blue-900 text-white font-bold px-6 py-2 rounded-bl-3xl">
                {{ gopass.status|upper }}
            </div>

            <div class="grid grid-cols-2 gap-8">
                <!-- Vol -->
                <div>
                    <p class="text-sm text-gray-500 font-bold uppercase tracking-wider mb-1">Vol / Flight</p>
                    <p class="text-5xl font-black text-blue-900 tracking-tighter">{{ gopass.flight.flight_number }}</p>
                </div>

                <!-- Date -->
                <div>
                    <p class="text-sm text-gray-500 font-bold uppercase tracking-wider mb-1">Date</p>
                    <p class="text-4xl font-bold text-red-600 tracking-tight">{{ gopass.flight.departure_time.strftime('%d/%m/%Y') }}</p>
                </div>

                <!-- Passenger -->
                <div class="col-span-2 border-t border-blue-200 pt-6 mt-2">
                    <p class="text-sm text-gray-500 font-bold uppercase tracking-wider mb-1">Passager / Passenger</p>
                    <p class="text-3xl font-bold text-gray-800 uppercase truncate">{{ gopass.passenger_name }}</p>
                </div>

                 <!-- Class / Route -->
                 <div>
                    <p class="text-sm text-gray-500 font-bold uppercase tracking-wider mb-1">Classe / Type</p>
                    <p class="text-xl font-bold text-gray-800 uppercase">{{ 'INTERNATIONAL' if gopass.price > 20 else 'NATIONAL' }}</p>
                </div>

                <div>
                    <p class="text-sm text-gray-500 font-bold uppercase tracking-wider mb-1">Itinéraire</p>
                    <p class="text-xl font-bold text-gray-800 uppercase">{{ gopass.flight.departure_airport }} <i class="fas fa-arrow-right text-blue-500 mx-2"></i> {{ gopass.flight.arrival_airport }}</p>
                </div>
            </div>
        </div>

        <!-- Security QR Code -->
        <div class="flex-1 flex flex-col items-center justify-center mb-8">
            <div class="bg-white p-4 rounded-xl border-2 border-gray-200 shadow-lg">
                <img src="data:image/png;base64,{{ qr_code }}" alt="QR Security" class="w-64 h-64 object-contain">
            </div>
            <p class="text-center text-xs font-bold text-gray-500 mt-4 uppercase tracking-wider">
                Signature Numérique Inviolable<br>Ce document est unique
            </p>
             <p class="text-center text-[10px] text-gray-400 mt-1 font-mono">
                TOKEN: {{ gopass.token[:20] }}...
            </p>
        </div>

        <!-- Footer -->
        <div class="mt-auto border-t-2 border-gray-200 pt-6">
            <div class="flex justify-between items-end">
                <div>
                    <p class="text-xs font-bold text-gray-500 uppercase mb-1">Instructions</p>
                    <p class="text-sm text-gray-700 italic">À présenter au contrôle avant l'embarquement / Present to control before boarding.</p>
                </div>
                <div class="text-right">
                    <p class="text-2xl font-black text-blue-900">{{ gopass.price }} {{ gopass.currency }}</p>
                    <p class="text-xs font-bold text-gray-500 uppercase mt-1">Payé via {{ gopass.payment_method }}</p>
                    <p class="text-[10px] text-gray-400 mt-1">Ref: {{ gopass.payment_ref }}</p>
                </div>
            </div>

            <div class="text-center mt-8 text-[10px] text-gray-400 uppercase tracking-widest">
                Powered by SGI-GP System • RVA RDC
            </div>
        </div>
    </div>
</body>
</html>
